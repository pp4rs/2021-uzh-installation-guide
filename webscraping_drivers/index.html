<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Webscraping - Programming Practices for Research in Econonomics</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Webscraping";
    var mkdocs_page_input_path = "webscraping_drivers.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Programming Practices for Research in Econonomics</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../windows-wsl/">Windows Subsystem</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../commandLine/">Command Line Tools</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../textEditor/">Text Editor</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../gitInstall/">Git</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../python/">Python</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../python-more/">Python Extras</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Webscraping</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#mac-users">Mac Users</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#google-chrome">Google Chrome</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#chromedriver">Chromedriver</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#windows-and-linux-users">Windows and Linux Users</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#google-chrome_1">Google Chrome</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#chromedriver_1">Chromedriver</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-windows-users">Additional Steps for Windows Users</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../snakemake/">Automation with Snakemake</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../r/">R</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../rstudio/">RStudio</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../r-packages/">R Packages</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../pandoc/">LaTeX & Pandoc</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../finish-line/">The Finish Line!</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../contact/">Contact Us</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../citation-license/">Citation & License</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../updates/">News & Updates</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../acknowledgement/">Acknowledgements</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Programming Practices for Research in Econonomics</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Webscraping</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <!-- markdownlint-disable MD024 -->
<!-- see https://github.com/DavidAnson/markdownlint for code to enable or disable rules -->
<h1 id="web-scraping-using-an-automated-browser">Web Scraping Using an Automated Browser</h1>
<p>Sometimes when we scrape the web, we need to automate our computer to open a web browser to gather information from each page.
This is especially true when the site we want to scrape has content that is loaded dynamically with javascript.</p>
<p>We will install one package to help us here: Chromedriver</p>
<p>Installing this stuff is operating system specific, hence so are the instructions below.</p>
<h2 id="mac-users">Mac Users</h2>
<h3 id="google-chrome">Google Chrome</h3>
<p>We need an up to date version of the web browser Google Chrome.
We will install it via Homebrew.
Enter the following into the terminal and hit <code>Return</code>:</p>
<pre><code class="language-bash">brew install --cask google-chrome
</code></pre>
<p>Verify the install:</p>
<pre><code class="language-bash">google-chrome --version
</code></pre>
<p>which should yield output similar to:</p>
<pre><code class="language-bash">Google Chrome 92.0.4515.107
</code></pre>
<h3 id="chromedriver">Chromedriver</h3>
<p>Now we install some software than can control a Google Chrome browser.
It is called Chromedriver.
Again, install via Homebrew:</p>
<pre><code class="language-bash">brew install --cask chromedriver
</code></pre>
<p>Verify your install.</p>
<pre><code class="language-bash">chromedriver --version
</code></pre>
<p>The expected output is <code>ChromeDriver 92.0.4515.107</code>.</p>
<p>It <strong>is important</strong> that the version numbers (i.e the '92.xxx' part) match between Google Chrome and Chromedriver.</p>
<div class="admonition warning">
<p class="admonition-title">Security and Privacy Settings</p>
<p>When you try and run the <code>chromedriver --version</code> command, a popup window may emerge warning you that chromedriver cannot be opened because the developer cannot be verified.</p>
<p>If this happens, click 'Cancel' and read on.</p>
<p>Go to System Preferences &gt; Security &amp; Privacy &gt; Allow apps downloaded from &gt; "Always allow" next to chromedriver.</p>
<p>Now try again.</p>
</div>
<h2 id="windows-and-linux-users">Windows and Linux Users</h2>
<h3 id="google-chrome_1">Google Chrome</h3>
<p>We need an up to date version of Google Chrome and some additional linux packages.</p>
<p>First add the additional linux packages by entering the following into the terminal:</p>
<pre><code class="language-bash">sudo apt-get install libxss1 libappindicator1 libindicator7
</code></pre>
<p>Now let's download the latest stable version of Google Chrome using the terminal:</p>
<pre><code class="language-bash">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
</code></pre>
<p>And now install it:</p>
<pre><code class="language-bash">sudo dpkg -i google-chrome*.deb
sudo apt-get install -f
</code></pre>
<p>Verify the install:</p>
<pre><code class="language-bash">google-chrome --version
</code></pre>
<p>which should yield output similar to:</p>
<pre><code class="language-bash">Google Chrome 92.0.4515.107
</code></pre>
<h3 id="chromedriver_1">Chromedriver</h3>
<p>Install <code>xvfb</code> by pasting the following into a terminal and then pressing <code>Return</code>:</p>
<pre><code class="language-bash">sudo apt-get install xvfb
</code></pre>
<p>This will allow Chrome to run 'headless' - i.e. without popping up a browser.</p>
<p>Install Chromedriver by pasting the following and then pressing <code>Return</code>:</p>
<pre><code class="language-bash">sudo apt-get install unzip

wget -N https://chromedriver.storage.googleapis.com/92.0.4515.107/chromedriver_linux64.zip
unzip chromedriver_linux64.zip
chmod +x chromedriver

sudo mv -f chromedriver /usr/local/share/chromedriver
sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
sudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver
</code></pre>
<p>Now verify the installation was successful:</p>
<pre><code class="language-bash">chromedriver --version
</code></pre>
<p>The expected output is <code>ChromeDriver 92.0.4515.107 ....</code>.</p>
<p>It <strong>is important</strong> that the version numbers (i.e the '92.xx' part) match between Google Chrome and Chromedriver.</p>
<div class="admonition tip">
<p class="admonition-title">Hat-tip</p>
<p>We borrowed quite liberally from Christopher Su to for instructions on <a href="https://christopher.su/2015/selenium-chromedriver-ubuntu/">installing Chrome and Chromedriver</a>.</p>
</div>
<h2 id="additional-steps-for-windows-users">Additional Steps for Windows Users</h2>
<p>We will Google Chrome to be able to "pop out" of our Ubuntu installation so that we can see it visually. 
Here's how we can make that happen:</p>
<ul>
<li>Install <a href="https://sourceforge.net/projects/vcxsrv/">vcxsrv</a> on Windows</li>
<li>Install the x11 client inside our Ubuntu installation. Type the following into the terminal:</li>
</ul>
<pre><code class="language-bash">sudo apt install x11-apps -y
</code></pre>
<ul>
<li>Add the following line to the <code>~/.bashrc</code> on our Ubuntu install:</li>
</ul>
<pre><code class="language-bash">export DISPLAY=$(awk '/nameserver/ {print $2}' /etc/resolv.conf):0.0
</code></pre>
<p>If you don't know how to complete this step, talk to us before or after a session or during one of the breaks in the course.</p>
<ul>
<li>Source the <code>.bashrc</code> file inside the Ubuntu shell:</li>
</ul>
<pre><code class="language-bash">source ~/.bashrc
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Starting xLaunch on Windows</p>
<p><strong>Note</strong>: Students don't need to do what is mentioned inside this box during installation. 
The info in this box is designed to remind us as instructors what we will need to do before starting the webscraping session.</p>
<ul>
<li>Start XLaunch on Windows from the start menu.</li>
<li>Select Multiple Windows (default).</li>
<li>Select Start no client (default).</li>
<li>Check Disable access control</li>
</ul>
<p>When one is finished their session, exit xLaunch.</p>
</div>
<!-- * Uncheck Native opengl  <- this might be needed?-->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../snakemake/" class="btn btn-neutral float-right" title="Automation with Snakemake">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../python-more/" class="btn btn-neutral" title="Python Extras"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../python-more/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../snakemake/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
